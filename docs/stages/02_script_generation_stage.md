# 阶段2：剧本生成阶段详细说明

## 1. 概述

剧本生成阶段是整个动态漫创作的核心环节，负责将用户的原始输入（一句话/短文）扩展为结构化的完整剧本。本阶段完全由AI语言模型驱动，生成角色设定、分镜脚本、对白台词等所有内容。

---

## 2. 故事分析与规划

### 2.1 输入理解模块

#### 核心信息提取

**提取要素**：

| 要素类型 | 说明 | 示例 |
|---------|------|------|
| 主题 | 故事的核心主题 | 成长、救赎、友情、复仇 |
| 类型 | 故事类型分类 | 冒险、恋爱、悬疑、恐怖 |
| 设定 | 故事世界观 | 现代、奇幻、科幻、历史 |
| 角色 | 识别或推断角色 | 少年、神秘少女 |
| 冲突 | 故事矛盾点 | 命运的抉择、力量的代价 |
| 情感 | 情感基调 | 温馨、悲伤、热血 |

**提取流程**：


#### 故事结构分析

**经典故事结构**：

**三幕式结构**：
| 幕 | 功能 | 时长占比 | 关键要素 |
|---|------|---------|---------|
| 第一幕（铺垫） | 建立世界观、介绍角色 | 25% | 激励事件、情节点1 |
| 第二幕（冲突） | 发展冲突、角色成长 | 50% | 中点、情节点2 |
| 第三幕（解决） | 高潮对决、故事收尾 | 25% | 高潮、结局 |

**英雄之旅结构**（适用于冒险/成长类）：
| 阶段 | 说明 | 视觉表现 |
|-----|------|---------|
| 平凡世界 | 主角日常状态 | 平凡、稳定的环境 |
| 冒险召唤 | 打破平衡的事件 | 转折、变化的征兆 |
| 拒绝召唤 | 主角犹豫 | 困惑、矛盾的表情 |
| 遇见导师 | 获得指导/工具 | 权威角色、关键物品 |
| 跨越门槛 | 正式踏上旅程 | 离开熟悉环境 |
| 试炼与盟友 | 遇到困难与伙伴 | 冲突场景、群体互动 |
| 接近洞穴 | 接近目标 | 紧张氛围、准备动作 |
| 严峻考验 | 最大挑战 | 高潮场景、激烈冲突 |
| 奖赏 | 获得成果 | 胜利姿态、重要物品 |
| 返回之路 | 回归旅程 | 反思、成长的表情 |
| 复活 | 最终考验 | 升华后的挑战 |
| 满载而归 | 带着改变回归 | 新的日常状态 |

**短篇结构**（适用于短视频）：
| 结构 | 模式 | 特点 | 时长建议 |
|-----|------|------|---------|
| 钩子-反转 | 设置悬念→意外结局 | 快速、冲击力强 | 30-60秒 |
| 情绪单线 | 单一情绪递进 | 简洁、情感纯粹 | 60-90秒 |
| 对比并列 | 两种状态对比 | 鲜明、易于理解 | 30-60秒 |
| 问答式 | 提出问题→解答 | 互动、引导思考 | 45-90秒 |


### 2.2 剧本结构规划

#### 章节规划

**章节自动分配算法**：


#### 节奏规划

**节奏曲线设计**：


**节奏控制参数**：

| 阶段 | 镜头数量 | 平均时长 | 运镜速度 | 转场频率 |
|-----|---------|---------|---------|---------|
| 开场 | 少 | 中等 | 缓慢 | 低 |
| 铺垫 | 中等 | 中等 | 中等 | 中 |
| 冲突 | 多 | 短 | 快速 | 高 |
| 高潮 | 最多 | 最短 | 最快 | 最高 |
| 结局 | 少 | 长 | 缓慢 | 低 |

---

## 3. 剧本/脚本生成

### 3.1 详细剧本生成

#### 剧本模板

**标准剧本格式**：


#### 剧本生成Prompt模板


### 3.2 分镜脚本生成

#### 分镜拆分规则

**自动拆分算法**：


#### 景别自动选择

**景别选择规则**：

| 情况 | 推荐景别 | 理由 |
|-----|---------|------|
| 场景介绍/环境交代 | 远景/大远景 | 展示环境全貌 |
| 角色首次出场 | 全景/中景 | 展示全身造型 |
| 两人对话 | 中景/中近景 | 展示互动关系 |
| 情感表达 | 近景/特写 | 强调表情细节 |
| 某个细节/物品 | 特写/大特写 | 突出重要性 |
| 动作场景 | 中景跟随 | 保持动作连贯 |

### 3.3 台词与对白生成

#### 角色声音建模

**声音特征定义**：


#### 对话生成策略

**对话生成考虑因素**：

1. **角色一致性**：每句台词符合角色性格
2. **情境适配**：对话符合当前场景
3. **推进剧情**：对话服务于故事发展
4. **自然流畅**：避免生硬和不自然的表达
5. **节奏控制**：对话长度与镜头时长匹配

**对话优化Prompt**：


---

## 4. 角色设定生成

### 4.1 角色档案创建

#### 自动角色提取

**提取流程**：


**角色重要性评分**：


#### 角色档案模板

**完整角色设定**：


### 4.2 角色一致性确保

#### 角色Embedding生成

**流程**：


**生成参考图序列**：


#### LoRA训练流程

**训练参数**：


**一致性验证**：


---

## 5. 输出数据结构

### 5.1 完整剧本输出

**剧本JSON结构**：


### 5.2 分镜序列输出

**分镜列表格式**：


---

## 6. 质量控制

### 6.1 剧本质量检查

**检查项**：


### 6.2 剧本评分标准

| 维度 | 权重 | 评分标准 |
|-----|------|---------|
| 故事完整性 | 30% | 起承转合完整，逻辑自洽 |
| 角色塑造 | 25% | 角色鲜明，行为一致 |
| 对话质量 | 20% | 自然流畅，符合角色 |
| 节奏控制 | 15% | 张弛有度，不拖沓 |
| 视觉化程度 | 10% | 描述具体，易于转化 |

---

## 7. 优化与迭代

### 7.1 自动优化

**优化方向**：
1. **节奏优化**：调整镜头数量和时长
2. **对话优化**：使对话更自然
3. **描述优化**：增加视觉描述细节
4. **情感优化**：强化情感表达

### 7.2 用户反馈整合

**反馈类型**：
- 剧本太长/太短 → 调整内容密度
- 角色不讨喜 → 调整角色设定
- 对话不自然 → 重新生成对话
- 某部分不满意 → 针对性修改

---

*文档版本：1.0*
*所属阶段：阶段2 - 剧本生成*
*最后更新：2026-02-02*
